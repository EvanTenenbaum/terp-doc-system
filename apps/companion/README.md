# Companion

A lightweight Next.js application for searching and viewing TERP documentation guides.

## Overview

Companion provides a simple UI for users to:

1. Search for guides by keyword
2. View step-by-step instructions with screenshots
3. Navigate through documentation categories

## Important Design Principle

**STRICT RULE**: This UI only renders retrieved guide content. It does NOT provide:

- Free-form explanations
- AI-generated answers
- Content not present in the guides

This ensures users always see accurate, pre-approved documentation.

## Directory Structure

```
apps/companion/
├── app/                 # Next.js App Router pages and API routes
│   ├── api/            # API endpoints for guides
│   ├── layout.tsx      # Root layout
│   ├── page.tsx        # Main page
│   └── globals.css     # Global styles
├── components/          # React components
│   ├── SearchBar.tsx   # Search input
│   ├── GuideList.tsx   # Guide cards
│   └── GuideViewer.tsx # Full guide display
├── lib/                 # Utilities
│   ├── guide-loader.ts # File-based guide loading
│   └── types.ts        # TypeScript types
├── guides/              # Sample guides (for development)
└── public/              # Static assets
```

## Quick Start

```bash
# Install dependencies (from repo root)
pnpm install

# Run development server
pnpm dev:companion

# Build for production
pnpm build:companion
```

The app will be available at `http://localhost:3000`.

## Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `GUIDES_DIR` | No | Path to guides directory (default: `./guides`) |

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/guides` | GET | List all guide metadata |
| `/api/guides/[id]` | GET | Get a specific guide by ID |
| `/api/search?q=query` | GET | Search guides (returns top 3) |

## Guide Format

Guides are JSON files with the following structure:

```json
{
  "metadata": {
    "id": "unique-id",
    "title": "Guide Title",
    "description": "Brief description",
    "category": "Category Name",
    "tags": ["tag1", "tag2"],
    "createdAt": "2025-01-06T00:00:00.000Z",
    "updatedAt": "2025-01-06T00:00:00.000Z",
    "version": "1.0.0"
  },
  "steps": [
    {
      "order": 1,
      "title": "Step Title",
      "description": "Step description",
      "screenshot": "screenshot-filename.png"
    }
  ]
}
```

## Connecting to Doc Bot Output

To use guides generated by doc-bot:

1. Set `GUIDES_DIR` to point to doc-bot's output directory
2. Or copy generated guides to `apps/companion/guides/`

Example:

```bash
# Option 1: Environment variable
GUIDES_DIR=../doc-bot/guides-output pnpm dev:companion

# Option 2: Symlink
ln -s ../doc-bot/guides-output guides
```

## Customization

The UI uses CSS modules for styling. Key files:

- `app/globals.css` - CSS variables and base styles
- `components/*.module.css` - Component-specific styles

To customize colors, modify the CSS variables in `globals.css`.
